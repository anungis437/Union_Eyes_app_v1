{
  "metadata": {
    "platform": "Union Eyes - Union Claims Management System",
    "inventory_date": "2026-02-12",
    "version": "1.0.0",
    "total_asset_count": 847,
    "classification_levels": ["CRITICAL", "HIGH", "MEDIUM", "LOW"],
    "contact": "Security & Compliance Team"
  },
  "infrastructure_assets": {
    "azure_resources": {
      "staging_environment": {
        "resource_group": {
          "name": "unioneyes-staging-rg",
          "location": "Canada Central",
          "classification": "HIGH",
          "dependencies": ["All staging resources"]
        },
        "web_apps": {
          "name": "unioneyes-staging-app",
          "url": "https://unioneyes-staging-app.azurewebsites.net",
          "type": "App Service",
          "classification": "HIGH",
          "sku": "B1",
          "owner": "Infrastructure Team",
          "security_controls": ["HTTPS only", "Always-on", "HTTP/2", "Managed Identity"]
        },
        "databases": {
          "name": "unioneyes-staging-db",
          "type": "PostgreSQL Flexible Server",
          "version": "16",
          "host": "unioneyes-staging-db.postgres.database.azure.com",
          "classification": "CRITICAL",
          "sku": "Standard_B2s",
          "storage": "32GB",
          "security_controls": ["SSL enforcement", "Firewall rules", "Geo-redundant backup", "PITR 7 days"]
        },
        "container_registry": {
          "name": "unioneyesstagingacr",
          "url": "unioneyesstagingacr.azurecr.io",
          "type": "Azure Container Registry",
          "classification": "HIGH",
          "sku": "Basic",
          "security_controls": ["Admin account disabled", "Vulnerability scanning"]
        },
        "storage_accounts": {
          "name": "unioneyesstagingstorage",
          "type": "Azure Blob Storage",
          "classification": "HIGH",
          "containers": ["unioneyes-uploads"],
          "security_controls": ["HTTPS required", "Soft delete 30 days", "Versioning enabled", "Encryption at rest AES-256"]
        },
        "ai_services": {
          "speech": {
            "name": "unioneyes-staging-speech",
            "region": "canadacentral",
            "type": "Azure Speech Service",
            "classification": "MEDIUM",
            "sku": "S0"
          },
          "openai_eastus": {
            "name": "unioneyes-staging-openai-eastus",
            "region": "East US",
            "type": "Azure OpenAI Service",
            "classification": "CRITICAL",
            "sku": "S0",
            "notes": "Primary OpenAI service with model deployments"
          },
          "openai_canadacentral": {
            "name": "unioneyes-staging-openai",
            "region": "canadacentral",
            "type": "Azure OpenAI Service",
            "classification": "LOW",
            "notes": "No model deployment support - unused"
          }
        },
        "key_vault": {
          "name": "unioneyes-staging-keyvault",
          "type": "Azure Key Vault",
          "classification": "CRITICAL",
          "url": "https://unioneyes-staging-keyvault.vault.azure.net/",
          "security_controls": ["RBAC", "Audit logging", "Soft delete", "Purge protection"]
        }
      },
      "production_environment": {
        "resource_group": {
          "name": "unioneyes-prod-rg",
          "location": "Canada Central",
          "classification": "CRITICAL",
          "dependencies": ["All production resources"]
        },
        "web_apps": {
          "name": "unioneyes-prod-app",
          "url": "https://unioneyes-prod-app.azurewebsites.net",
          "type": "App Service",
          "classification": "CRITICAL",
          "sku": "P1V3",
          "owner": "Infrastructure Team",
          "security_controls": ["HTTPS only", "Always-on", "HTTP/2", "Managed Identity", "Auto-scale"]
        },
        "databases": {
          "name": "unioneyes-prod-db",
          "type": "PostgreSQL Flexible Server",
          "version": "16",
          "host": "unioneyes-prod-db.postgres.database.azure.com",
          "classification": "CRITICAL",
          "sku": "Standard_B2s",
          "storage": "32GB",
          "security_controls": ["SSL enforcement", "Firewall rules", "Geo-redundant backup", "PITR 7 days", "Encryption at rest"]
        },
        "container_registry": {
          "name": "unioneyesprodacr",
          "url": "unioneyesprodacr.azurecr.io",
          "type": "Azure Container Registry",
          "classification": "CRITICAL",
          "sku": "Basic",
          "security_controls": ["Admin account disabled", "Vulnerability scanning", "Image signing"]
        },
        "storage_accounts": {
          "name": "unioneyesprodstorage",
          "type": "Azure Blob Storage",
          "classification": "CRITICAL",
          "containers": ["unioneyes-uploads", "backups", "archives"],
          "security_controls": ["HTTPS required", "Soft delete 30 days", "Versioning enabled", "Encryption at rest AES-256", "Immutable storage WORM"]
        },
        "ai_services": {
          "speech": {
            "name": "unioneyes-prod-speech",
            "region": "canadacentral",
            "type": "Azure Speech Service",
            "classification": "MEDIUM",
            "sku": "S0"
          },
          "openai": {
            "name": "unioneyes-prod-openai",
            "region": "East US",
            "type": "Azure OpenAI Service",
            "classification": "CRITICAL",
            "sku": "S0",
            "deployed_models": ["gpt-4"]
          }
        },
        "key_vault": {
          "name": "unioneyes-prod-keyvault",
          "type": "Azure Key Vault",
          "classification": "CRITICAL",
          "url": "https://unioneyes-prod-keyvault.vault.azure.net/",
          "security_controls": ["RBAC", "Audit logging 7 years", "Soft delete", "Purge protection", "HSM-backed keys"]
        },
        "monitoring": {
          "application_insights": {
            "type": "Application Insights",
            "classification": "HIGH",
            "retention": "90 days"
          },
          "log_analytics": {
            "type": "Log Analytics Workspace",
            "classification": "CRITICAL",
            "retention": "90 days hot, 7 years archive"
          }
        }
      },
      "swiss_disaster_recovery": {
        "cold_storage": {
          "name": "union-eyes-cold-storage",
          "location": "swiss-zurich",
          "type": "Offline Storage",
          "classification": "CRITICAL",
          "purpose": "Force majeure / disaster recovery",
          "retention": "7 years"
        }
      }
    },
    "vercel_deployment": {
      "platform": "Vercel",
      "classification": "HIGH",
      "cron_jobs": [
        {
          "path": "/api/cron/overdue-notifications",
          "schedule": "0 9 * * *",
          "description": "Daily overdue claim notifications"
        },
        {
          "path": "/api/cron/monthly-per-capita",
          "schedule": "0 0 1 * *",
          "description": "Monthly CLC per-capita remittances"
        },
        {
          "path": "/api/cron/education-reminders",
          "schedule": "0 6 * * *",
          "description": "Education course reminders"
        },
        {
          "path": "/api/cron/analytics/daily-metrics",
          "schedule": "0 2 * * *",
          "description": "Daily analytics aggregation"
        },
        {
          "path": "/api/cron/compliance/pci-quarterly-scan-reminder",
          "schedule": "0 8 1,15 * *",
          "description": "PCI compliance scan reminders"
        },
        {
          "path": "/api/cron/compliance/pci-key-rotation-check",
          "schedule": "0 7 * * MON",
          "description": "Weekly PCI key rotation check"
        }
      ]
    },
    "dns_domains": {
      "primary_domain": "unioneyes.app",
      "staging_domain": "unioneyes-staging-app.azurewebsites.net",
      "production_domain": "unioneyes-prod-app.azurewebsites.net",
      "classification": "HIGH"
    },
    "ci_cd_pipelines": {
      "github_actions": {
        "repository": "Union_Eyes_app_v1",
        "workflows": [
          "azure-deploy.yml",
          "api-security.yml",
          "coverage.yml",
          "security-checks.yml",
          "repo-hygiene.yml",
          "docker-ci.yml",
          "billing-scheduler.yml",
          "union-validators.yml"
        ],
        "classification": "HIGH",
        "secrets_managed": [
          "AZURE_CREDENTIALS_STAGING",
          "AZURE_CREDENTIALS_PROD",
          "STAGING_DATABASE_URL",
          "PROD_DATABASE_URL",
          "CLERK_SECRET_KEY",
          "STRIPE_SECRET_KEY"
        ]
      },
      "mobile_workflows": {
        "platform": "GitHub Actions - Expo/React Native",
        "workflows": [
          "build-production.yml",
          "build-preview.yml",
          "update-ota.yml",
          "run-tests.yml",
          "eas-submit.yml"
        ],
        "classification": "HIGH"
      }
    },
    "docker_infrastructure": {
      "compose_files": [
        "docker-compose.yml",
        "docker-compose.prod.yml",
        "docker-compose.staging.yml",
        "docker-compose.blue-green.yml",
        "docker-compose.observability.yml"
      ],
      "dockerfiles": [
        "Dockerfile",
        "Dockerfile.optimized",
        "Dockerfile.simple",
        "Dockerfile.staging"
      ],
      "base_images": [
        "pgvector/pgvector:pg16",
        "node:20-alpine",
        "nginx:alpine"
      ],
      "classification": "HIGH"
    }
  },
  "software_assets": {
    "third_party_services": {
      "authentication": {
        "clerk": {
          "service": "Clerk Authentication",
          "purpose": "User authentication & identity management",
          "classification": "CRITICAL",
          "data_processed": ["User credentials", "Sessions", "MFA tokens"],
          "compliance": ["SOC 2", "GDPR"],
          "endpoints": ["clerk.com API"],
          "security_controls": ["OAuth 2.0", "JWT validation", "Webhook signature verification"]
        }
      },
      "payment_processing": {
        "stripe": {
          "service": "Stripe",
          "purpose": "Payment processing (PCI-DSS SAQ A compliant)",
          "classification": "CRITICAL",
          "data_processed": ["Payment intents", "Subscription data", "Customer billing info"],
          "compliance": ["PCI-DSS Level 1", "SOC 2"],
          "endpoints": ["api.stripe.com"],
          "security_controls": ["Webhook signature verification", "Idempotency keys", "3DS"]
        },
        "whop": {
          "service": "Whop",
          "purpose": "Alternative payment processor",
          "classification": "HIGH",
          "endpoints": ["whop.com API"],
          "security_controls": ["Webhook verification", "SDK authentication"]
        }
      },
      "monitoring_observability": {
        "sentry": {
          "service": "Sentry",
          "purpose": "Error monitoring and performance tracking",
          "classification": "HIGH",
          "data_processed": ["Error logs", "Stack traces", "Performance metrics"],
          "endpoints": ["sentry.io"],
          "retention": "90 days"
        },
        "langfuse": {
          "service": "Langfuse",
          "purpose": "LLM observability and cost tracking",
          "classification": "MEDIUM",
          "data_processed": ["LLM requests", "Token usage", "Latency metrics"],
          "endpoints": ["cloud.langfuse.com"]
        }
      },
      "communication_services": {
        "resend": {
          "service": "Resend",
          "purpose": "Transactional email delivery (primary)",
          "classification": "HIGH",
          "data_processed": ["Email content", "Recipient addresses", "Delivery status"],
          "endpoints": ["api.resend.com"]
        },
        "sendgrid": {
          "service": "SendGrid",
          "purpose": "Email delivery (optional fallback)",
          "classification": "MEDIUM",
          "endpoints": ["api.sendgrid.com"]
        },
        "twilio": {
          "service": "Twilio",
          "purpose": "SMS communication",
          "classification": "HIGH",
          "data_processed": ["Phone numbers", "SMS content", "Delivery status"],
          "endpoints": ["api.twilio.com"],
          "security_controls": ["Webhook signature verification", "Number verification"]
        }
      },
      "document_services": {
        "docusign": {
          "service": "DocuSign",
          "purpose": "E-signature (demo environment)",
          "classification": "MEDIUM",
          "endpoints": ["demo.docusign.net"],
          "security_controls": ["OAuth 2.0", "Webhook verification", "Document encryption"]
        },
        "hellosign": {
          "service": "HelloSign (optional)",
          "purpose": "E-signature alternative",
          "classification": "LOW",
          "endpoints": ["hellosign.com API"]
        }
      },
      "cloud_services": {
        "firebase": {
          "service": "Firebase Cloud Messaging",
          "purpose": "Push notifications",
          "classification": "HIGH",
          "data_processed": ["Device tokens", "Notification content"],
          "endpoints": ["fcm.googleapis.com"]
        },
        "upstash_redis": {
          "service": "Upstash Redis",
          "purpose": "Distributed caching & rate limiting",
          "classification": "CRITICAL",
          "data_processed": ["Session cache", "Rate limit counters", "AI embeddings cache"],
          "security_controls": ["TLS encryption", "API authentication"],
          "cost_savings": "80%+ OpenAI API cost reduction via caching"
        },
        "vercel_blob": {
          "service": "Vercel Blob Storage",
          "purpose": "File uploads alternative to Azure",
          "classification": "MEDIUM"
        }
      },
      "ai_services": {
        "openai": {
          "service": "OpenAI API",
          "purpose": "GPT-4 integration (alternative to Azure OpenAI)",
          "classification": "CRITICAL",
          "data_processed": ["User queries", "Context data", "Embeddings"],
          "endpoints": ["api.openai.com"]
        },
        "anthropic": {
          "service": "Anthropic Claude API (optional)",
          "purpose": "Alternative LLM provider",
          "classification": "MEDIUM"
        },
        "google_ai": {
          "service": "Google AI Gemini (optional)",
          "purpose": "Alternative LLM provider",
          "classification": "MEDIUM"
        },
        "google_cloud_vision": {
          "service": "Google Cloud Vision API",
          "purpose": "OCR and document analysis",
          "classification": "HIGH",
          "data_processed": ["Document images", "Extracted text"]
        },
        "aws_textract": {
          "service": "AWS Textract",
          "purpose": "Alternative OCR service",
          "classification": "MEDIUM"
        },
        "tesseract": {
          "service": "Tesseract.js (local)",
          "purpose": "Client-side OCR",
          "classification": "LOW"
        }
      },
      "integration_services": {
        "microsoft_graph": {
          "service": "Microsoft Graph API",
          "purpose": "Calendar sync (Outlook, Teams)",
          "classification": "MEDIUM",
          "data_processed": ["Calendar events", "User profiles"]
        },
        "google_apis": {
          "service": "Google APIs",
          "purpose": "Calendar sync, Maps, Gmail integration",
          "classification": "MEDIUM",
          "endpoints": ["googleapis.com"],
          "apis_used": ["Calendar API", "Maps API", "Gmail API"]
        },
        "shopify": {
          "service": "Shopify (Shop Moi Ça)",
          "purpose": "Recognition rewards e-commerce",
          "classification": "MEDIUM",
          "endpoints": ["shop-moi-ca.myshopify.com"]
        }
      },
      "address_validation": {
        "google_maps": {
          "service": "Google Maps API",
          "purpose": "Address validation & geocoding",
          "classification": "MEDIUM"
        },
        "smartystreets": {
          "service": "SmartyStreets",
          "purpose": "US address validation",
          "classification": "LOW"
        },
        "here_technologies": {
          "service": "HERE Technologies",
          "purpose": "Alternative address validation",
          "classification": "LOW"
        },
        "loqate": {
          "service": "Loqate",
          "purpose": "UK/Ireland address validation",
          "classification": "LOW"
        }
      },
      "cdn_storage": {
        "cloudflare_r2": {
          "service": "Cloudflare R2 (optional)",
          "purpose": "Alternative document storage",
          "classification": "MEDIUM"
        },
        "aws_s3": {
          "service": "AWS S3 (optional)",
          "purpose": "Alternative document storage",
          "classification": "MEDIUM"
        }
      }
    },
    "npm_dependencies": {
      "total_packages": 270,
      "critical_dependencies": {
        "next": "^15.5.12",
        "react": "^18",
        "react-dom": "^18",
        "drizzle-orm": "^0.45.1",
        "postgres": "^3.4.4",
        "@clerk/nextjs": "^5.3.7",
        "@clerk/backend": "^1.9.0",
        "stripe": "^16.9.0",
        "@sentry/nextjs": "^10.30.0",
        "@azure/identity": "^4.0.0",
        "@azure/keyvault-secrets": "^4.7.0",
        "@azure/keyvault-keys": "^4.10.0",
        "zod": "^3.23.8",
        "typescript": "^5"
      },
      "ui_frameworks": [
        "@radix-ui/react-*",
        "@headlessui/react",
        "@heroicons/react",
        "framer-motion",
        "lucide-react",
        "tailwindcss"
      ],
      "data_visualization": [
        "chart.js",
        "recharts",
        "react-chartjs-2"
      ],
      "ai_ml": [
        "@tensorflow/tfjs-node",
        "@langchain/*"
      ],
      "testing": [
        "vitest",
        "@testing-library/react",
        "@testing-library/jest-dom",
        "supertest"
      ],
      "build_tools": [
        "turbo",
        "tsup",
        "tsx",
        "drizzle-kit"
      ]
    },
    "docker_images": {
      "application_images": [
        "unioneyes:latest",
        "unioneyes:optimized",
        "unioneyes:staging"
      ],
      "database_images": [
        "pgvector/pgvector:pg16"
      ],
      "classification": "HIGH",
      "registries": [
        "unioneyesstagingacr.azurecr.io",
        "unioneyesprodacr.azurecr.io"
      ]
    },
    "database_schema": {
      "total_tables": 200,
      "rls_protected_tables": 150,
      "critical_tables": [
        "claims",
        "organization_members",
        "organizations",
        "collective_agreements",
        "dues_transactions",
        "payments",
        "member_documents",
        "chat_sessions",
        "chat_messages",
        "financial_audit_log",
        "audit_logs"
      ],
      "schema_domains": {
        "authentication": [
          "users",
          "sessions",
          "organizations",
          "organization_members"
        ],
        "claims_management": [
          "claims",
          "claim_updates",
          "claimPrecedentAnalysis",
          "grievance_workflow"
        ],
        "financial": [
          "dues_transactions",
          "payments",
          "payment_methods",
          "payment_cycles",
          "bank_reconciliation",
          "chart_of_accounts",
          "gl_transaction_log",
          "remittances",
          "strike_fund_disbursements"
        ],
        "compliance": [
          "provincial_privacy_settings",
          "indigenous_data_classifications",
          "gdpr_data_requests",
          "gdpr_consent_records",
          "pci_compliance_scans",
          "audit_logs",
          "certification_compliance_reports"
        ],
        "governance": [
          "golden_shares",
          "reserved_matter_votes",
          "mission_audits",
          "council_elections"
        ],
        "documents": [
          "documents",
          "document_folders",
          "member_documents",
          "signature_workflows",
          "defensibility_packs"
        ],
        "communications": [
          "chat_sessions",
          "chat_messages",
          "messages",
          "notifications",
          "push_notifications",
          "newsletters",
          "sms_communications"
        ],
        "analytics": [
          "analytics_metrics",
          "kpi_configurations",
          "ml_predictions",
          "communication_analytics",
          "user_engagement_scores"
        ],
        "calendar_scheduling": [
          "calendars",
          "calendar_events",
          "event_attendees",
          "meeting_rooms",
          "room_bookings"
        ],
        "bargaining_negotiations": [
          "negotiations",
          "bargaining_proposals",
          "tentative_agreements",
          "negotiation_sessions",
          "cba_clauses",
          "arbitration_decisions"
        ],
        "education_training": [
          "training_courses",
          "course_sessions",
          "course_registrations",
          "member_certifications"
        ]
      },
      "migrations_count": 81,
      "migration_system": "Drizzle ORM"
    }
  },
  "data_assets": {
    "database_tables": {
      "count": 200,
      "rls_protection": "150+ tables with Row-Level Security",
      "encryption": "Column-level encryption for PII (SIN, SSN, bank accounts)",
      "backup_frequency": "Daily incremental, Weekly full, Transaction logs every 15 min",
      "retention": "7 days PITR, 7 years long-term archive",
      "classification": "CRITICAL"
    },
    "file_storage_locations": {
      "azure_blob_primary": {
        "location": "Azure Blob Storage - unioneyesstagingstorage/unioneyesprodstorage",
        "containers": [
          "unioneyes-uploads",
          "backups",
          "archives",
          "cold-storage"
        ],
        "classification": "CRITICAL",
        "encryption": "AES-256 at rest, TLS in transit",
        "retention": "Soft delete 30 days, Versioning enabled",
        "volume": "500GB+"
      },
      "document_categories": [
        "Collective Bargaining Agreements (CBAs)",
        "Grievance evidence documents",
        "Member medical records",
        "Financial reports",
        "Training materials",
        "Legal documents",
        "Signature documents"
      ]
    },
    "backup_locations": {
      "azure_backup_primary": {
        "location": "Azure Canada Central",
        "type": "Geo-redundant backups",
        "retention": "7 days hot, 28 days warm, 1 year cool, 7 years archive",
        "classification": "CRITICAL"
      },
      "azure_backup_secondary": {
        "location": "Azure Canada East",
        "type": "Geo-replication (async 15 min lag)",
        "retention": "30 days",
        "classification": "CRITICAL"
      },
      "swiss_cold_storage": {
        "location": "Swiss Zurich",
        "type": "Offline disaster recovery",
        "retention": "7 years",
        "classification": "CRITICAL",
        "purpose": "Force majeure / complete Azure outage recovery"
      },
      "backup_schedule": {
        "transaction_logs": "Every 15 minutes",
        "incremental": "Daily at 11:00 PM ET",
        "full": "Weekly Sunday 2:00 AM ET",
        "monthly_archive": "1st of month",
        "annual_archive": "January 1st"
      }
    },
    "log_repositories": {
      "application_logs": {
        "location": "Azure Log Analytics",
        "retention": "90 days queryable, 7 years archive",
        "classification": "HIGH",
        "volume": "~100GB/month"
      },
      "audit_logs": {
        "location": "PostgreSQL + Azure Archive Storage",
        "retention": "7 years immutable",
        "classification": "CRITICAL",
        "compliance": ["SOC 2", "PIPEDA", "GDPR"],
        "log_types": [
          "Authentication events",
          "Financial transactions",
          "Data access (GDPR)",
          "Configuration changes",
          "Security events"
        ]
      },
      "security_logs": {
        "sentry": "90 days",
        "azure_monitor": "90 days hot, 7 years archive",
        "classification": "CRITICAL"
      }
    },
    "data_classifications": {
      "RESTRICTED": {
        "examples": ["Medical records", "SINs", "SSNs", "Bank account numbers"],
        "tables": ["encrypted_pii", "member_medical_records"],
        "encryption": "Column-level AES-256 + Azure Key Vault",
        "access_controls": ["Break-glass only", "Audit logged"]
      },
      "CONFIDENTIAL": {
        "examples": ["Claims data", "Grievances", "CBAs", "Financial records"],
        "tables": ["claims", "grievances", "collective_agreements", "dues_transactions"],
        "access_controls": ["RLS enabled", "Role-based access", "MFA required"]
      },
      "INTERNAL": {
        "examples": ["Member profiles", "Organization data", "Training materials"],
        "tables": ["organization_members", "profiles", "training_courses"],
        "access_controls": ["RLS enabled", "Organization isolation"]
      },
      "PUBLIC": {
        "examples": ["Public website content", "Job postings"],
        "tables": ["cms_pages", "job_postings", "public_events"]
      }
    }
  },
  "network_assets": {
    "api_endpoints": {
      "total_routes": 464,
      "protected_routes": 385,
      "public_routes": 22,
      "cron_routes": 8,
      "webhook_routes": 9,
      "authentication": "Clerk + withEnhancedRoleAuth (373+ routes)",
      "rate_limiting": "Upstash Redis (per-user, per-endpoint)",
      "classification": "CRITICAL",
      "categories": {
        "authentication": [
          "/api/test-auth",
          "/api/users/me/organizations"
        ],
        "claims_management": [
          "/api/claims",
          "/api/claims/[id]",
          "/api/workflow/overdue",
          "/api/workbench/assigned",
          "/api/workbench/assign"
        ],
        "financial": [
          "/api/portal/dues/pay",
          "/api/strike/funds",
          "/api/strike/stipends",
          "/api/tax/slips",
          "/api/tax/t106"
        ],
        "documents": [
          "/api/documents",
          "/api/documents/[id]",
          "/api/documents/upload",
          "/api/documents/[id]/download",
          "/api/documents/[id]/ocr"
        ],
        "signatures": [
          "/api/signatures/sign",
          "/api/signatures/documents",
          "/api/signatures/audit/[documentId]"
        ],
        "webhooks": [
          "/api/webhooks/stripe",
          "/api/webhooks/clc",
          "/api/webhooks/signatures",
          "/api/webhooks/whop",
          "/api/integrations/shopify/webhooks"
        ],
        "voting": [
          "/api/voting/sessions",
          "/api/voting/sessions/[id]",
          "/api/voting/sessions/[id]/vote",
          "/api/voting/sessions/[id]/results"
        ],
        "governance": [
          "/api/governance/dashboard",
          "/api/governance/reserved-matters",
          "/api/governance/mission-audits"
        ],
        "analytics": [
          "/api/analytics/dashboard",
          "/api/analytics/metrics",
          "/api/cron/analytics/daily-metrics"
        ],
        "ai_chat": [
          "/api/ai/chat",
          "/api/ai/embeddings",
          "/api/ai/search"
        ],
        "integrations": [
          "/api/integrations/api-keys",
          "/api/integrations/webhooks",
          "/api/clc/sync",
          "/api/external-data"
        ]
      },
      "public_routes_justification": {
        "/api/health": "Load balancer health check",
        "/api/health/liveness": "Kubernetes liveness probe",
        "/api/docs/openapi.json": "Public API documentation",
        "/api/webhooks/*": "External systems (Stripe, CLC, DocuSign) - signature verified",
        "/api/whop/unauthenticated-checkout": "Guest checkout flow",
        "/api/communications/track/*": "Email open/click tracking - token based"
      }
    },
    "webhook_endpoints": {
      "incoming_webhooks": [
        {
          "endpoint": "/api/webhooks/stripe",
          "provider": "Stripe",
          "events": ["payment_intent.succeeded", "customer.subscription.deleted", "charge.refunded"],
          "security": "Signature verification (webhook secret)",
          "classification": "CRITICAL"
        },
        {
          "endpoint": "/api/webhooks/clc",
          "provider": "Canadian Labour Congress",
          "events": ["per_capita_update", "organization_sync"],
          "security": "API key authentication",
          "classification": "HIGH"
        },
        {
          "endpoint": "/api/webhooks/signatures",
          "provider": "DocuSign",
          "events": ["envelope.completed", "envelope.sent", "recipient.completed"],
          "security": "Webhook signature verification",
          "classification": "HIGH"
        },
        {
          "endpoint": "/api/webhooks/whop",
          "provider": "Whop",
          "events": ["membership.created", "membership.deleted"],
          "security": "SDK signature verification",
          "classification": "MEDIUM"
        },
        {
          "endpoint": "/api/integrations/shopify/webhooks",
          "provider": "Shopify",
          "events": ["orders/paid", "orders/fulfilled", "refunds/create"],
          "security": "HMAC signature verification",
          "classification": "MEDIUM"
        }
      ],
      "outgoing_webhooks": [
        {
          "destination": "CLC API",
          "purpose": "Per-capita remittance reporting",
          "frequency": "Monthly",
          "security": "OAuth 2.0 + API key"
        },
        {
          "destination": "Organization webhooks (custom)",
          "purpose": "Event notifications to member organizations",
          "events": "Configurable per organization",
          "security": "Secret-based HMAC"
        }
      ]
    },
    "network_integrations": {
      "external_apis": {
        "clerk": {
          "direction": "bidirectional",
          "purpose": "Authentication",
          "endpoints": ["api.clerk.com"],
          "protocols": ["HTTPS", "OAuth 2.0"],
          "classification": "CRITICAL"
        },
        "stripe": {
          "direction": "bidirectional",
          "purpose": "Payment processing",
          "endpoints": ["api.stripe.com"],
          "protocols": ["HTTPS", "Webhook"],
          "classification": "CRITICAL"
        },
        "azure_openai": {
          "direction": "outbound",
          "purpose": "AI/LLM queries",
          "endpoints": ["*.openai.azure.com"],
          "protocols": ["HTTPS", "REST"],
          "classification": "CRITICAL"
        },
        "sentry": {
          "direction": "outbound",
          "purpose": "Error tracking",
          "endpoints": ["*.sentry.io"],
          "protocols": ["HTTPS"],
          "classification": "HIGH"
        }
      },
      "network_security": {
        "firewall_rules": "Azure NSG + Application Gateway",
        "ddos_protection": "Azure DDoS Protection Standard",
        "waf": "Azure WAF (planned)",
        "ssl_tls": "TLS 1.2+ required",
        "cors_policy": "Explicit origin allowlist only"
      }
    }
  },
  "application_assets": {
    "source_code_repositories": {
      "primary_repo": {
        "location": "GitHub",
        "name": "Union_Eyes_app_v1",
        "visibility": "Private",
        "classification": "CRITICAL",
        "branches": ["main", "staging", "development"],
        "protected_branches": ["main", "staging"],
        "line_count": "~500,000 lines TypeScript/JavaScript",
        "security_controls": ["Branch protection", "Required reviews", "Signed commits"]
      },
      "mobile_repo": {
        "location": "GitHub",
        "path": "mobile/",
        "platform": "Expo / React Native",
        "classification": "HIGH"
      },
      "packages": {
        "location": "packages/",
        "monorepo_structure": [
          "packages/auth",
          "packages/db",
          "packages/multi-tenant",
          "packages/shared",
          "packages/supabase",
          "packages/types"
        ]
      },
      "services": {
        "location": "services/",
        "microservices": [
          "services/financial-service",
          "services/carbon-accounting-integration"
        ]
      }
    },
    "configuration_files": {
      "environment_configs": [
        ".env.example",
        ".env.local.template",
        ".env.database.example",
        ".env.calendar-sync.example",
        ".env.test.example"
      ],
      "application_configs": [
        "vercel.json",
        "next.config.js",
        "drizzle.config.ts",
        "tsconfig.json",
        "package.json",
        "components.json"
      ],
      "infrastructure_configs": [
        "docker-compose.yml",
        "Dockerfile",
        "azure-pipelines.yml (via GitHub Actions)"
      ],
      "classification": "CRITICAL",
      "security_note": "Actual .env files excluded from git via .gitignore"
    },
    "secrets_credentials_management": {
      "azure_key_vault": {
        "name": "unioneyes-prod-keyvault",
        "secrets_stored": [
          "pii-encryption-key (HSM-backed)",
          "database-admin-password",
          "clerk-secret-key",
          "stripe-secret-key",
          "azure-openai-key",
          "sendgrid-api-key",
          "twilio-auth-token"
        ],
        "classification": "CRITICAL",
        "access_controls": "Managed Identity + RBAC",
        "audit_logging": "7 years immutable"
      },
      "github_secrets": {
        "repository_secrets": [
          "AZURE_CREDENTIALS_STAGING",
          "AZURE_CREDENTIALS_PROD",
          "STAGING_DATABASE_URL",
          "PROD_DATABASE_URL",
          "CLERK_SECRET_KEY",
          "STRIPE_SECRET_KEY",
          "SENTRY_AUTH_TOKEN"
        ],
        "classification": "CRITICAL"
      },
      "vercel_environment_variables": {
        "production": "Synced from Azure Key Vault",
        "staging": "Separate staging credentials",
        "classification": "CRITICAL"
      },
      "encryption_keys": {
        "primary": "Azure Key Vault HSM-backed",
        "fallback": "FALLBACK_ENCRYPTION_KEY (base64, 256-bit)",
        "rotation_policy": "Annual + breach-triggered",
        "algorithm": "AES-256-GCM"
      }
    },
    "documentation": {
      "technical_docs": [
        "API_DOCUMENTATION_SPRINT_COMPLETE.md",
        "DATABASE_INDEX_ANALYSIS.md",
        "LLM_EXCELLENCE_SUMMARY.md",
        "DOCKER_EXCELLENCE_PHASE1_READY.md",
        "COVERAGE_GUIDE.md"
      ],
      "implementation_reports": [
        "IMPLEMENTATION_COMPLETE_SUMMARY.md",
        "BARGAINING_MODULE_IMPLEMENTATION_COMPLETE.md",
        "PHASE_2-4_APP_OPERATIONS_COMPLETE.md"
      ],
      "compliance_docs": [
        "docs/compliance/ISMS_SCOPE_STATEMENT.md",
        "docs/compliance/policies/INFORMATION_SECURITY_POLICY.md",
        "docs/compliance/policies/BACKUP_RECOVERY_POLICY.md",
        "docs/compliance/policies/DATA_CLASSIFICATION_POLICY.md"
      ],
      "deployment_guides": [
        "docs/deployment/AZURE_DEPLOYMENT.md",
        "docs/deployment/AZURE_STAGING_DEPLOYMENT.md",
        "docs/deployment/PRODUCTION_READINESS.md"
      ],
      "security_reports": [
        "docs/security/SECURITY_POSTURE.md",
        "docs/reports/security/API_ROUTES_SECURITY_AUDIT_REPORT.md"
      ],
      "classification": "MEDIUM to HIGH (depending on content)"
    }
  },
  "security_controls": {
    "authentication": {
      "primary": "Clerk (MFA supported)",
      "session_management": "JWT + secure cookies",
      "password_policy": "Enforced by Clerk (min 8 chars, complexity)",
      "mfa_enforcement": "Available for all users, required for admins"
    },
    "authorization": {
      "model": "Role-Based Access Control (RBAC)",
      "role_levels": "26 distinct roles (0-999 hierarchy)",
      "organization_isolation": "Row-Level Security (RLS) on 150+ tables",
      "api_guards": "withEnhancedRoleAuth on 373+ routes"
    },
    "encryption": {
      "data_at_rest": "AES-256 (Azure Storage, PostgreSQL)",
      "data_in_transit": "TLS 1.2+ enforced",
      "pii_encryption": "Column-level AES-256-GCM + Azure Key Vault",
      "backup_encryption": "AES-256 + customer-managed keys"
    },
    "network_security": {
      "firewall": "Azure NSG + Application Gateway",
      "ddos_protection": "Azure DDoS Standard (planned)",
      "rate_limiting": "Upstash Redis (per-user, per-endpoint)",
      "cors_policy": "Explicit origin allowlist",
      "ssl_enforcement": "HTTPS only, HTTP redirects"
    },
    "monitoring_logging": {
      "application_monitoring": "Sentry + Azure Application Insights",
      "security_monitoring": "Azure Security Center",
      "audit_logging": "Comprehensive (7 year retention)",
      "log_analytics": "Azure Log Analytics",
      "alerting": "Azure Monitor + custom alerts"
    },
    "vulnerability_management": {
      "dependency_scanning": "GitHub Dependabot",
      "container_scanning": "Azure Container Registry scanning",
      "code_scanning": "ESLint security rules",
      "penetration_testing": "Planned quarterly"
    },
    "incident_response": {
      "plan": "Documented in security policies",
      "break_glass_access": "Force majeure system with 24h max duration",
      "disaster_recovery": "RTO 4h, RPO 24h",
      "swiss_cold_storage": "Offline backup for total Azure outage"
    },
    "compliance_frameworks": {
      "implemented": ["SOC 2 Type II (in progress)", "PIPEDA", "GDPR"],
      "planned": ["PCI-DSS SAQ A", "ISO 27001"],
      "regulations": ["Canadian privacy laws", "Provincial privacy (Quebec, BC, Alberta)", "FNIGC (Indigenous data)"]
    }
  },
  "asset_ownership": {
    "infrastructure_team": {
      "responsible_for": ["Azure resources", "Docker infrastructure", "CI/CD pipelines", "Network configuration"],
      "contact": "infrastructure@unioneyes.app"
    },
    "security_compliance_team": {
      "responsible_for": ["Security policies", "Audit logs", "Compliance documentation", "Incident response"],
      "contact": "security@unioneyes.app"
    },
    "development_team": {
      "responsible_for": ["Application code", "API endpoints", "Database schema", "Third-party integrations"],
      "contact": "dev@unioneyes.app"
    },
    "data_team": {
      "responsible_for": ["Data classification", "Backup management", "Analytics", "Data retention"],
      "contact": "data@unioneyes.app"
    }
  },
  "risk_assessment": {
    "critical_single_points_of_failure": [
      "Azure Canada Central region outage → Mitigated by Canada East geo-replication + Swiss cold storage",
      "Clerk authentication service outage → No documented fallback",
      "Stripe payment processing outage → Whop available as alternative",
      "PostgreSQL database corruption → Mitigated by PITR + geo-redundant backups"
    ],
    "high_value_targets": [
      "Azure Key Vault (all secrets)",
      "Production database (all member data)",
      "Azure Blob Storage (documents, backups)",
      "Clerk authentication (session control)",
      "Stripe integration (financial data)"
    ],
    "recommended_actions": [
      "Implement Azure WAF for enhanced DDoS protection",
      "Add Clerk fallback authentication mechanism",
      "Enable Azure AD B2C as backup identity provider",
      "Implement quarterly penetration testing",
      "Add automated secret rotation",
      "Implement zero-trust network architecture"
    ]
  }
}
