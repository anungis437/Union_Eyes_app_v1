# Production Environment Template
# Copy this file to .env.production and fill in actual values
# NEVER commit .env.production to version control

# ============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# Azure Canada Central Region Deployment
# ============================================================================

# Environment
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://app.unioneyes.ca
NEXT_TELEMETRY_DISABLED=1

# ============================================================================
# DATABASE CONFIGURATION - Azure PostgreSQL Flexible Server
# ============================================================================
DATABASE_TYPE=postgresql
DATABASE_URL=postgresql://unionadmin:SECURE_PASSWORD@unioneyes-prod.postgres.database.azure.com:5432/unioneyes?sslmode=require

# Connection Pool Configuration (Azure PostgreSQL Flexible Server)
# Azure Flexible Server default max_connections: 859 (4 vCores)
# Recommended per app instance: 50-100 connections
# Formula: (max_connections - superuser_reserved) / number_of_app_instances
DB_POOL_MAX=75                    # 75 connections per app instance
DB_IDLE_TIMEOUT=30                # Close idle connections after 30 seconds
DB_CONNECTION_TIMEOUT=10          # Connection establishment timeout (10s)
DB_QUERY_TIMEOUT=30000            # Query timeout: 30 seconds (30000ms)
DB_SSL=true                       # REQUIRED for Azure PostgreSQL

# ============================================================================
# AUTHENTICATION - Clerk Production
# ============================================================================
CLERK_SECRET_KEY=sk_live_PRODUCTION_SECRET_KEY_HERE
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_live_PRODUCTION_PUBLISHABLE_KEY_HERE
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/login
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/signup
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/dashboard
CLERK_COOKIE_DOMAIN=.unioneyes.ca

# ============================================================================
# SECURITY SECRETS
# ============================================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
VOTING_SECRET=GENERATE_64_CHARACTER_HEX_STRING_HERE
CRON_SECRET=GENERATE_64_CHARACTER_HEX_STRING_HERE

# ============================================================================
# PAYMENTS - WHOP Production
# ============================================================================
WHOP_WEBHOOK_SECRET=whsec_PRODUCTION_WEBHOOK_SECRET
WHOP_WEBHOOK_KEY=PRODUCTION_WEBHOOK_KEY
WHOP_API_KEY=PRODUCTION_API_KEY
WHOP_PLAN_ID_MONTHLY=plan_PRODUCTION_MONTHLY
WHOP_PLAN_ID_YEARLY=plan_PRODUCTION_YEARLY
NEXT_PUBLIC_WHOP_REDIRECT_URL=https://app.unioneyes.ca/api/whop/callback
NEXT_PUBLIC_WHOP_PORTAL_LINK=https://whop.com/portal
ACTIVE_PAYMENT_PROVIDER=whop

# Stripe (Backup/Alternative)
STRIPE_WEBHOOK_SECRET=whsec_PRODUCTION_STRIPE_WEBHOOK
STRIPE_SECRET_KEY=sk_live_PRODUCTION_STRIPE_KEY
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_PRODUCTION_STRIPE_KEY

# ============================================================================
# EMAIL DELIVERY - Resend Production
# ============================================================================
EMAIL_PROVIDER=resend
RESEND_API_KEY=re_PRODUCTION_RESEND_API_KEY
EMAIL_FROM=noreply@unioneyes.ca
EMAIL_REPLY_TO=support@unioneyes.ca

# ============================================================================
# DOCUMENT STORAGE - Cloudflare R2
# ============================================================================
STORAGE_TYPE=r2
CLOUDFLARE_R2_BUCKET=unioneyes-documents-prod
CLOUDFLARE_ACCOUNT_ID=CLOUDFLARE_ACCOUNT_ID_HERE
CLOUDFLARE_ACCESS_KEY_ID=R2_ACCESS_KEY_ID_HERE
CLOUDFLARE_SECRET_ACCESS_KEY=R2_SECRET_ACCESS_KEY_HERE

# ============================================================================
# DOCUMENT SIGNING - DocuSign Production
# ============================================================================
DOCUSIGN_INTEGRATION_KEY=PRODUCTION_INTEGRATION_KEY
DOCUSIGN_SECRET_KEY=PRODUCTION_SECRET_KEY
DOCUSIGN_API_ACCOUNT_ID=PRODUCTION_ACCOUNT_ID
DOCUSIGN_USER_ID=PRODUCTION_USER_GUID
DOCUSIGN_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nPRODUCTION_PRIVATE_KEY_HERE\n-----END RSA PRIVATE KEY-----"
DOCUSIGN_BASE_URL=https://na3.docusign.net

# ============================================================================
# REDIS CACHE - Upstash Production
# ============================================================================
UPSTASH_REDIS_REST_URL=https://PRODUCTION_REDIS_URL.upstash.io
UPSTASH_REDIS_REST_TOKEN=PRODUCTION_REDIS_TOKEN

# ============================================================================
# MONITORING & ERROR TRACKING
# ============================================================================
# Sentry Production
SENTRY_DSN=https://PUBLIC_KEY@oORG_ID.ingest.sentry.io/PROJECT_ID
SENTRY_ORG=union-eyes
SENTRY_PROJECT=union-eyes-app
SENTRY_ENVIRONMENT=production

# OpenTelemetry Distributed Tracing (Honeycomb)
OTEL_ENABLED=true
OTEL_SERVICE_NAME=union-eyes-prod
OTEL_SERVICE_VERSION=1.0.0
OTEL_EXPORTER_OTLP_ENDPOINT=https://api.honeycomb.io:443
OTEL_EXPORTER_OTLP_HEADERS=x-honeycomb-team=PRODUCTION_HONEYCOMB_API_KEY
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1       # Sample 10% of traces in production
OTEL_LOG_LEVEL=error              # Only log errors from OpenTelemetry

# ============================================================================
# AI SERVICES - OpenAI Production
# ============================================================================
OPENAI_API_KEY=sk-proj-PRODUCTION_OPENAI_KEY
ANTHROPIC_API_KEY=sk-ant-PRODUCTION_ANTHROPIC_KEY
AI_CHATBOT_DEFAULT_PROVIDER=openai
AI_CHATBOT_DEFAULT_MODEL=gpt-4
AI_CHATBOT_TEMPERATURE=0.7
CHATBOT_RAG_ENABLED=true
CONTENT_SAFETY_ENABLED=true

# LLM Observability (Langfuse)
LANGFUSE_PUBLIC_KEY=pk-lf-PRODUCTION_PUBLIC_KEY
LANGFUSE_SECRET_KEY=sk-lf-PRODUCTION_SECRET_KEY
LANGFUSE_HOST=https://cloud.langfuse.com
LANGFUSE_ENABLED=true

# ============================================================================
# CANADIAN COMPLIANCE CONFIGURATION
# ============================================================================
# Provincial Privacy Laws
PROVINCIAL_PRIVACY_ENABLED=true
QUEBEC_PRIVACY_LEVEL=strict
QUEBEC_DATA_RESIDENCY_REQUIRED=true
BC_PRIVACY_LEVEL=strict
ALBERTA_PRIVACY_LEVEL=moderate

# Indigenous Data Sovereignty (FNIGC OCAPÂ® Principles)
INDIGENOUS_DATA_ENABLED=true
BAND_COUNCIL_CONSENT_REQUIRED=true
TRADITIONAL_KNOWLEDGE_PROTECTION=true
FNIGC_COMPLIANCE_ENABLED=true

# Strike Fund Tax Reporting (CRA T4A, Quebec RL-1)
STRIKE_FUND_TAX_REPORTING_ENABLED=true
T4A_REPORTING_ENABLED=true
T4A_THRESHOLD=500
RL1_REPORTING_ENABLED=true
TAX_YEAR_END=12-31
UNION_BN=123456789RC0001          # Your CRA Business Number

# Break Glass Emergency Access
BREAK_GLASS_ENABLED=true
BREAK_GLASS_MAX_DURATION=24
FORCE_MAJEURE_48H_COMMITMENT=true

# Swiss Cold Storage (Force Majeure Backup)
SWISS_COLD_STORAGE_ENABLED=true
SWISS_COLD_STORAGE_BUCKET=unioneyes-force-majeure
SWISS_COLD_STORAGE_REGION=ch-gva-2
SWISS_COLD_STORAGE_ACCESS_KEY_ID=SWISS_STORAGE_ACCESS_KEY
SWISS_COLD_STORAGE_SECRET_KEY=SWISS_STORAGE_SECRET_KEY

# ============================================================================
# AZURE SERVICES
# ============================================================================
# Azure Key Vault (Secrets Management)
AZURE_TENANT_ID=AZURE_TENANT_ID_HERE
AZURE_CLIENT_ID=AZURE_CLIENT_ID_HERE
AZURE_CLIENT_SECRET=AZURE_CLIENT_SECRET_HERE
AZURE_KEY_VAULT_NAME=unioneyes-prod-kv
AZURE_KEY_VAULT_SECRET_NAME=app-secrets

# Azure AI Services (Optional)
AZURE_SPEECH_KEY=AZURE_SPEECH_KEY_HERE
AZURE_SPEECH_REGION=canadacentral
AZURE_OPENAI_ENDPOINT=https://unioneyes.openai.azure.com/
AZURE_OPENAI_KEY=AZURE_OPENAI_KEY_HERE
AZURE_COMPUTER_VISION_KEY=AZURE_CV_KEY_HERE
AZURE_COMPUTER_VISION_ENDPOINT=https://canadacentral.api.cognitive.microsoft.com/

# ============================================================================
# FEATURE FLAGS - Production Settings
# ============================================================================
GEOFENCE_PRIVACY_ENABLED=true
LOCATION_TRACKING_ENABLED=false    # Disabled by default for privacy
LOCATION_TRACKING_CONSENT_REQUIRED=true
CURRENCY_ENFORCEMENT_ENABLED=true
DEFAULT_CURRENCY=CAD

# GDPR Compliance
NEXT_PUBLIC_GDPR_ENABLED=true
NEXT_PUBLIC_COOKIE_POLICY_URL=/cookie-policy
NEXT_PUBLIC_PRIVACY_POLICY_URL=/privacy-policy
GDPR_DPO_EMAIL=dpo@unioneyes.ca
GDPR_DPO_NAME=Data Protection Officer

# Address Validation
GOOGLE_MAPS_API_KEY=GOOGLE_MAPS_API_KEY_HERE
ADDRESS_VALIDATION_ENABLED=true

# Accessibility
ACCESSIBILITY_AXE_ENABLED=true
ACCESSIBILITY_LIGHTHOUSE_ENABLED=true
ACCESSIBILITY_MIN_SCORE=80

# Optional Features (Disabled in MVP)
REWARDS_ENABLED=false
SHOPIFY_ENABLED=false

# ============================================================================
# OPTIONAL SERVICES
# ============================================================================
# SMS Notifications (Twilio)
# TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_PHONE_NUMBER=+15551234567

# Firebase (Push Notifications)
# FIREBASE_PROJECT_ID=unioneyes-prod
# FIREBASE_SERVICE_ACCOUNT_KEY='{"type":"service_account",...}'

# Microsoft Graph (Calendar Sync)
# GRAPH_API_CLIENT_ID=AZURE_APP_CLIENT_ID
# GRAPH_API_CLIENT_SECRET=AZURE_APP_CLIENT_SECRET
# GRAPH_API_TENANT_ID=AZURE_TENANT_ID

# ============================================================================
# DEPLOYMENT INFORMATION
# ============================================================================
# These variables are automatically set by deployment platform
# Included here for reference only

# Vercel:
# VERCEL=1
# VERCEL_ENV=production
# VERCEL_URL=app.unioneyes.ca
# VERCEL_GIT_COMMIT_SHA=<git-sha>

# Docker:
# HOSTNAME=<container-hostname>
# PORT=3000
