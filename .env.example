# =============================================================================
# WEEK 1 P0 CRITICAL - Required Environment Variables
# =============================================================================

# Push Notifications (FCM/Firebase)
# Required for push notification support
# Get credentials from: https://console.firebase.google.com/
FIREBASE_SERVICE_ACCOUNT_KEY='{"type":"service_account","project_id":"your-project",...}'

# Email Service (SendGrid - Optional, falls back to Resend)
# Get API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
EMAIL_FROM=notifications@yourdomain.com

# Email Service (Resend - Primary fallback)
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxx

# SMS Service (Twilio)
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxx
TWILIO_PHONE_NUMBER=+1234567890

# Redis (Required for notification workers)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# =============================================================================
# Existing Configuration Below
# =============================================================================

WHOP_PLAN_ID_MONTHLY=
WHOP_PLAN_ID_YEARLY=
WHOP_WEBHOOK_KEY=
NEXT_PUBLIC_WHOP_REDIRECT_URL=
WHOP_API_KEY=
NEXT_PUBLIC_WHOP_PORTAL_LINK=https://whop.com/portal

# Database Configuration
DATABASE_TYPE=postgresql
DATABASE_URL=
DB_POOL_MAX=20                  # Connection pool size (dev: 20, prod: 50-100)
DB_IDLE_TIMEOUT=30              # Idle connection timeout in seconds (default: 30s)
DB_CONNECTION_TIMEOUT=10        # Connection establishment timeout in seconds (default: 10s)
DB_QUERY_TIMEOUT=30000          # Query timeout in milliseconds (default: 30000ms / 30s)
DB_SSL=false                    # Enable SSL for database connection (required for production)

NEXT_PUBLIC_SUPABASE_URL=https://xryvcdbmljxlsrfanvrv.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# DocuSign (Demo)
DOCUSIGN_USER_ID=
DOCUSIGN_API_ACCOUNT_ID=
DOCUSIGN_BASE_URL=https://demo.docusign.net


NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/login
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/signup
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/dashboard
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/dashboard

ACTIVE_PAYMENT_PROVIDER=whop

CLERK_COOKIE_DOMAIN=localhost
CLERK_SESSION_TOKEN_LEEWAY=5
CLERK_ROTATE_SESSION_INTERVAL=86400

ACTIVE_PAYMENT_PROVIDER=whop

# Vercel Blob Storage
BLOB_READ_WRITE_TOKEN=

# Email Service (Resend)
RESEND_API_KEY=
EMAIL_FROM=noreply@unionclaims.com
EMAIL_REPLY_TO=support@unionclaims.com
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Scheduled Reports - Cron Security
CRON_SECRET=

# CORS Configuration (Security Hardened - Feb 2026)
# Comma-separated list of allowed origins for CORS requests
# Production: Always specify explicit origins, never use wildcard
# Development: localhost origins are automatically allowed
# Example: CORS_ALLOWED_ORIGINS=https://app.yourdomain.com,https://api.yourdomain.com
CORS_ALLOWED_ORIGINS=

# Email Delivery for Reports
EMAIL_PROVIDER=resend

# Redis Configuration (REQUIRED)
# For notification worker and job queues
REDIS_HOST=localhost
REDIS_PORT=6379

# Upstash Redis (Distributed Caching & Rate Limiting - REQUIRED)
# Used for:
# - Analytics query caching
# - AI embedding caching (reduces OpenAI API costs by 80%+)
# - Rate limiting for API endpoints
# - Notification worker job queues
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-token-here

# Encryption Keys (REQUIRED for production)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
FALLBACK_ENCRYPTION_KEY=your-base64-key-here
TEST_ENCRYPTION_KEY=dGVzdGtleWZvcmVuY3J5cHRpb24xMjM0NTY3ODk=

# Twilio SMS (Phase 5 - Week 1)
TWILIO_ACCOUNT_SID=your_account_sid_here
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WEBHOOK_SECRET=optional_webhook_secret

# Recognition & Rewards Feature Flags
REWARDS_ENABLED=false
SHOPIFY_ENABLED=false

# Shopify Integration (Shop Moi Ça)
# Note: Store actual tokens in Azure Key Vault in production
# Format: SHOPIFY_TOKEN_ORG_{org_id} for per-org configuration
SHOPIFY_SHOP_DOMAIN=shop-moi-ca.myshopify.com
SHOPIFY_STOREFRONT_TOKEN=your_storefront_access_token
SHOPIFY_ADMIN_TOKEN=your_admin_api_token
SHOPIFY_WEBHOOK_SECRET=your_webhook_secret

# ==================================================================
# PHASE 1 FOUNDATION - COMPLIANCE & INFRASTRUCTURE
# ==================================================================

# PROVINCIAL PRIVACY (P1 Critical)
PROVINCIAL_PRIVACY_ENABLED=true
QUEBEC_PRIVACY_LEVEL=strict
QUEBEC_DATA_RESIDENCY_REQUIRED=true
BC_PRIVACY_LEVEL=strict
ALBERTA_PRIVACY_LEVEL=moderate

# INDIGENOUS DATA SOVEREIGNTY (P1 Critical)
INDIGENOUS_DATA_ENABLED=true
BAND_COUNCIL_CONSENT_REQUIRED=true
TRADITIONAL_KNOWLEDGE_PROTECTION=true
FNIGC_COMPLIANCE_ENABLED=true

# STRIKE FUND TAX REPORTING (P1 Critical)
STRIKE_FUND_TAX_REPORTING_ENABLED=true
T4A_REPORTING_ENABLED=true
T4A_THRESHOLD=500
RL1_REPORTING_ENABLED=true
TAX_YEAR_END=12-31

# FORCE MAJEURE & EMERGENCY ACCESS (P1 Critical)
BREAK_GLASS_ENABLED=true
BREAK_GLASS_MAX_DURATION=24
SWISS_COLD_STORAGE_ENABLED=true
SWISS_COLD_STORAGE_BUCKET=union-eyes-cold-storage
SWISS_COLD_STORAGE_REGION=swiss-zurich
SWISS_COLD_STORAGE_ACCESS_KEY_ID=your-swiss-storage-access-key
SWISS_COLD_STORAGE_SECRET_KEY=your-swiss-storage-secret-key
FORCE_MAJEURE_48H_COMMITMENT=true

# GEOFENCE PRIVACY (P2 High-Impact)
GEOFENCE_PRIVACY_ENABLED=true
LOCATION_TRACKING_ENABLED=false
LOCATION_TRACKING_CONSENT_REQUIRED=true
LOCATION_DATA_RETENTION_DAYS=30

# TRANSFER PRICING & CURRENCY (P2 High-Impact)
CURRENCY_ENFORCEMENT_ENABLED=true
DEFAULT_CURRENCY=CAD
ALLOW_USD=false
BOC_NOON_RATE_API=https://www.bankofcanada.ca/valet/observations/FXUSDCAD/json
T106_FILING_ENABLED=true
T106_THRESHOLD=1000000

# FOUNDER CONFLICT MANAGEMENT (P2 High-Impact)
FOUNDER_CONFLICT_MANAGEMENT_ENABLED=true
BLIND_TRUST_REQUIRED=true
BLIND_TRUST_MINIMUM_DURATION=5
ANNUAL_CONFLICT_DISCLOSURE_REQUIRED=true
ARMS_LENGTH_VERIFICATION_ENABLED=true

# JOINT TRUST FMV (P2 High-Impact)
FMV_ENFORCEMENT_ENABLED=true
CPI_ADJUSTMENT_ENABLED=true
COMPETITIVE_BIDDING_ENABLED=true
MINIMUM_BIDDERS=3

# CERTIFICATION MANAGEMENT (P3 Documentation)
CERTIFICATION_MANAGEMENT_ENABLED=true
CERTIFICATION_RENEWAL_REMINDER_DAYS=30
HR_PROFESSIONAL_CERTIFICATION_REQUIRED=true

# EMPLOYER NON-INTERFERENCE (P3 Documentation)
EMPLOYER_NON_INTERFERENCE_ENABLED=true
FIREWALL_ACCESS_RULES_ENABLED=true
DATA_CLASSIFICATION_ENABLED=true

# WHIPLASH PREVENTION (P3 Documentation)
WHIPLASH_PREVENTION_ENABLED=true
PAYMENT_SEPARATION_ENABLED=true
STRIKE_FUND_SEPARATE_ACCOUNT=true
STRIPE_DUES_ACCOUNT_ID=acct_dues_account_id
STRIPE_STRIKE_FUND_ACCOUNT_ID=acct_strike_fund_account_id

# LMBP IMMIGRATION (Validator #14)
LMBP_IMMIGRATION_ENABLED=true
FOREIGN_WORKER_TRACKING=true
GSS_APPLICATION_ENABLED=true

# GOLDEN SHARE GOVERNANCE (Validator #16)
GOLDEN_SHARE_ENABLED=true
GOLDEN_SHARE_HOLDER=workers_union_council
RESERVED_MATTERS_ENABLED=true
COUNCIL_ELECTIONS_ENABLED=true

# CARBON ACCOUNTING (Validator #7 Enhancement)
CARBON_ACCOUNTING_ENABLED=true
CARBON_NEUTRAL_TARGET=true
CARBON_OFFSET_PROVIDER=bullfrog_power
AZURE_RENEWABLE_ONLY=true
AUTO_PURCHASE_OFFSETS=true

# AZURE INFRASTRUCTURE
AZURE_SUBSCRIPTION_ID=your-azure-subscription-id
AZURE_RESOURCE_GROUP=union-eyes-prod
AZURE_REGION=canadaeast
AZURE_KEY_VAULT_URI=https://union-eyes-keyvault.vault.azure.net/

# AZURE AUTHENTICATION (for Key Vault and other services)
AZURE_CLIENT_ID=your-azure-client-id
AZURE_CLIENT_SECRET=your-azure-client-secret
AZURE_TENANT_ID=your-azure-tenant-id

# ENCRYPTION (PII Data Protection - SIN, SSN, Bank Accounts)
# Production: Use Azure Key Vault (recommended)
# Development: Use FALLBACK_ENCRYPTION_KEY
ENCRYPTION_KEY_NAME=pii-encryption-key
# Generate: pnpm tsx scripts/generate-encryption-key.ts
FALLBACK_ENCRYPTION_KEY=

# CRA BUSINESS NUMBER
UNION_BN=123456789RC0001

# ==============================================
# GDPR COMPLIANCE ✨ NEW (v2.0)
# ==============================================
NEXT_PUBLIC_GDPR_ENABLED=true
NEXT_PUBLIC_COOKIE_POLICY_URL=/cookie-policy
NEXT_PUBLIC_PRIVACY_POLICY_URL=/privacy-policy
GDPR_DPO_EMAIL=dpo@yourunion.com
GDPR_DPO_NAME="Data Protection Officer"

# ==============================================
# E-SIGNATURE: DocuSign ✨ NEW (v2.0)
# ==============================================
DOCUSIGN_API_KEY=your_integration_key_here
DOCUSIGN_ACCOUNT_ID=your_account_id_here
DOCUSIGN_ENVIRONMENT=sandbox
DOCUSIGN_WEBHOOK_SECRET=your_webhook_secret_here
DOCUSIGN_USER_ID=your_user_id
DOCUSIGN_PRIVATE_KEY_PATH=/path/to/private.key

# ==============================================
# E-SIGNATURE: HelloSign ✨ NEW (v2.0)
# ==============================================
HELLOSIGN_API_KEY=your_api_key_here
HELLOSIGN_CLIENT_ID=your_client_id_here

# ==============================================
# E-SIGNATURE: Adobe Sign (Optional) ✨ NEW (v2.0)
# ==============================================
ADOBE_SIGN_API_KEY=your_api_key_here
ADOBE_SIGN_BASE_URI=https://api.na1.adobesign.com/api/rest/v6

# ==============================================
# STORAGE FOR SIGNATURES ✨ NEW (v2.0)
# ==============================================
# AWS S3 (recommended for production)
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=us-east-1
AWS_SIGNATURES_BUCKET=union-eyes-signatures

# OR Cloudflare R2
CLOUDFLARE_R2_ACCESS_KEY_ID=your_access_key
CLOUDFLARE_R2_SECRET_ACCESS_KEY=your_secret_key
CLOUDFLARE_R2_BUCKET=union-eyes-signatures
CLOUDFLARE_R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com

# ==============================================
# WEBHOOKS & SECURITY ✨ NEW (v2.0)
# ==============================================
SIGNATURE_TOKEN_SECRET=your_random_secret_here
MAX_DOCUMENT_SIZE_BYTES=10485760
ALLOWED_DOCUMENT_TYPES=pdf,doc,docx

# ==============================================
# RATE LIMITING ✨ NEW (v2.0)
# ==============================================
SIGNATURE_RATE_LIMIT_DAILY=100
GDPR_EXPORT_RATE_LIMIT_MONTHLY=5

# ==============================================
# AI CHATBOT ✨ NEW (Priority 2)
# ==============================================
# OpenAI (GPT-4)
OPENAI_API_KEY=sk-your_openai_api_key_here

# Anthropic (Claude)
ANTHROPIC_API_KEY=sk-ant-your_anthropic_api_key_here

# Google AI (Gemini)
GOOGLE_AI_API_KEY=your_google_ai_key_here

# AI Configuration
AI_CHATBOT_DEFAULT_PROVIDER=openai
AI_CHATBOT_DEFAULT_MODEL=gpt-4
AI_CHATBOT_TEMPERATURE=0.7
CHATBOT_RAG_ENABLED=true
CHATBOT_RAG_MIN_SIMILARITY=0.7
CHATBOT_RAG_MAX_DOCUMENTS=3
CONTENT_SAFETY_ENABLED=true

# LLM Observability (Langfuse) - Production Monitoring
# Get credentials from: https://cloud.langfuse.com/
# Optional but highly recommended for production to monitor:
# - Token usage and costs
# - Latency and performance
# - Error rates and debugging
LANGFUSE_PUBLIC_KEY=pk-lf-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
LANGFUSE_SECRET_KEY=sk-lf-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
# LANGFUSE_HOST=https://cloud.langfuse.com  # Optional: Custom/self-hosted instance
# LANGFUSE_ENABLED=true  # Optional: Set to false to disable observability

# ==============================================
# ACCESSIBILITY TESTING ✨ NEW (Priority 2)
# ==============================================
ACCESSIBILITY_AXE_ENABLED=true
ACCESSIBILITY_AXE_RULES=wcag21aa,wcag22aa,best-practice
ACCESSIBILITY_LIGHTHOUSE_ENABLED=true
LIGHTHOUSE_CHROME_PATH=/usr/bin/google-chrome

# Scheduled Audits (cron expression)
ACCESSIBILITY_AUDIT_SCHEDULE="0 2 * * *"
ACCESSIBILITY_AUDIT_ENVIRONMENTS=staging,production

# Notifications
ACCESSIBILITY_NOTIFY_ON_CRITICAL=true
ACCESSIBILITY_NOTIFY_EMAILS=accessibility-team@yourunion.com
ACCESSIBILITY_SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Score Thresholds
ACCESSIBILITY_MIN_SCORE=80
ACCESSIBILITY_BLOCK_DEPLOY_ON_CRITICAL=true

# ==============================================
# INTERNATIONAL ADDRESS VALIDATION ✨ NEW (Priority 2)
# ==============================================
# Google Maps API (recommended)
GOOGLE_MAPS_API_KEY=AIzaSy_your_google_maps_key_here
GOOGLE_MAPS_ENABLE_VALIDATION=true
GOOGLE_MAPS_ENABLE_GEOCODING=true

# SmartyStreets (US addresses)
SMARTYSTREETS_AUTH_ID=your_auth_id_here
SMARTYSTREETS_AUTH_TOKEN=your_auth_token_here
SMARTYSTREETS_ENABLE_USPS=true

# HERE Technologies (alternative)
HERE_API_KEY=your_here_api_key_here
HERE_ENABLE_VALIDATION=true

# Loqate (UK/Ireland specialist)
LOQATE_API_KEY=your_loqate_key_here

# Validation Configuration
ADDRESS_VALIDATION_ENABLED=true
ADDRESS_VALIDATION_CACHE_TTL=2592000
ADDRESS_VALIDATION_AUTO=true
ADDRESS_GEOCODING_ENABLED=true
ADDRESS_CHANGE_HISTORY_RETENTION=2555

# ==============================================
# DISTRIBUTED TRACING (OpenTelemetry) ✨ P1 HIGH
# ==============================================
# Enable comprehensive distributed tracing across all services
# Helps diagnose cross-service issues and reduces MTTR from >4 hours to <30 minutes
# 
# Install packages first:
# pnpm add -w @opentelemetry/api @opentelemetry/sdk-node @opentelemetry/auto-instrumentations-node @opentelemetry/exporter-trace-otlp-http @opentelemetry/resources @opentelemetry/semantic-conventions

# Enable/disable tracing (disable in development if not needed)
OTEL_ENABLED=true

# Service name for identifying traces
OTEL_SERVICE_NAME=unioneyes

# OTLP Protocol (http/protobuf for Honeycomb, grpc for others)
OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf

# OTLP Exporter Configuration
# Honeycomb (recommended): https://api.honeycomb.io (no port suffix)
# Jaeger: http://localhost:4318/v1/traces
# Grafana Tempo: http://localhost:4318/v1/traces
OTEL_EXPORTER_OTLP_ENDPOINT=https://api.honeycomb.io

# Authentication headers (format: key1=value1,key2=value2)
# Honeycomb: x-honeycomb-team=YOUR_API_KEY
# Datadog: DD-API-KEY=YOUR_API_KEY
OTEL_EXPORTER_OTLP_HEADERS=x-honeycomb-team=your-honeycomb-api-key

# Sampling strategy
# - always_on: Trace everything (high overhead, use for debugging)
# - always_off: No tracing
# - traceidratio: Sample X% of traces (set OTEL_TRACES_SAMPLER_ARG)
# - parentbased_always_on: Always trace if parent trace exists (recommended)
OTEL_TRACES_SAMPLER=parentbased_always_on

# Sampling rate for probabilistic sampling (0.0 to 1.0)
# Example: 0.1 = 10% of traces
# OTEL_TRACES_SAMPLER_ARG=0.1
